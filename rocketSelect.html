<!-- rocketSelect.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>Select Rocket</title>
    <style>
      body {
        display: flex;
        flex-direction: column; /* Aligne les enfants verticalement */
        justify-content: center; /* Centre verticalement */
        align-items: center; /* Centre horizontalement */
        height: 100vh;
        margin: 0;
        background: url("images/scoreboard_background.png") no-repeat center
          center fixed; /* Image de fond */
        background-size: cover; /* Couvre toute la page */
        color: black;
        overflow: hidden;
      }

      h1 {
        font-size: 3rem;
        margin-bottom: 20px; /* Espacement sous le titre */
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Effet d'ombre */
      }

      .rocket-grid {
        display: flex;
        justify-content: center; /* Centre les rockets horizontalement */
        gap: 20px; /* Espacement entre les rockets */
        margin: 20px;
      }

      .rocket {
        padding: 10px;
        cursor: pointer;
        border: 2px solid transparent;
        background-color: black;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        transition: transform 0.2s, border-color 0.2s;
      }

      .rocket:hover {
        transform: scale(1.05);
      }

      .rocket.selected {
        border-color: cyan;
      }

      .rocket img {
        width: 50px;
        display: block;
        margin: auto;
      }

      .back-button {
        display: block;
        padding: 10px 20px;
        font-size: 1rem;
        color: white;
        background-color: rgba(0, 0, 0, 0.6);
        border: 1px solid white;
        border-radius: 5px;
        text-decoration: none;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
        transition: background-color 0.3s;
        margin-top: 20px; /* Espacement par rapport aux rockets */
      }

      .back-button:hover {
        background-color: rgba(255, 255, 255, 0.2);
      }

      .rocket.locked {
        opacity: 0.5;
        position: relative;
      }

      .lock-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 5px;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <!-- Titre ajouté -->
    <h1>Select Your Rocket</h1>

    <!-- Conteneur des rockets -->
    <div class="rocket-grid">
      <!-- Default rocket - always available -->
      <div class="rocket" onclick="selectRocket('default')">
        <img src="images/spaceship/missile.png" />
      </div>

      <!-- Blue rocket - locked until 2000 -->
      <div
        class="rocket locked"
        data-score="2000"
        onclick="trySelectRocket('blue')"
      >
        <img src="images/spaceship/missile_blue.png" />
        <div class="lock-overlay">2000</div>
      </div>

      <!-- Green rocket - locked until 2500 -->
      <div
        class="rocket locked"
        data-score="2500"
        onclick="trySelectRocket('green')"
      >
        <img src="images/spaceship/missile_green.png" />
        <div class="lock-overlay">2500</div>
      </div>

      <!-- Pink rocket - locked until 3000 -->
      <div
        class="rocket locked"
        data-score="3000"
        onclick="trySelectRocket('pink')"
      >
        <img src="images/spaceship/missile_pink.png" />
        <div class="lock-overlay">3000</div>
      </div>
    </div>

    <!-- Bouton retour au jeu -->
    <button class="back-button" onclick="location.href='game.html'">
      Back to Game
    </button>

    <script>
      function selectRocket(type) {
        localStorage.setItem("selectedRocket", type);
        document
          .querySelectorAll(".rocket")
          .forEach((r) => r.classList.remove("selected"));
        event.currentTarget.classList.add("selected");
      }

      function trySelectRocket(type) {
        const unlockedRockets = JSON.parse(
          localStorage.getItem("unlockedRockets")
        ) || ["default"];

        if (unlockedRockets.includes(type)) {
          selectRocket(type);
        } else {
          alert(
            `Score ${rocketUnlockThresholds[type]} required to unlock this rocket!`
          );
        }
      }

      // Add this function to update visual state of rockets
      function updateRocketDisplay() {
        const unlockedRockets = JSON.parse(
          localStorage.getItem("unlockedRockets")
        ) || ["default"];
        document.querySelectorAll(".rocket").forEach((rocket) => {
          const type = rocket.getAttribute("onclick").match(/'(.+?)'/)[1];
          if (unlockedRockets.includes(type)) {
            rocket.classList.remove("locked");
          }
        });
      }

      // Call on page load
      updateRocketDisplay();

      // Affiche la sélection actuelle
      const current = localStorage.getItem("selectedRocket") || "default";
      document
        .querySelector(`[onclick="selectRocket('${current}')"]`)
        .classList.add("selected");
    </script>
  </body>
</html>
